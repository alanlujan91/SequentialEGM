{"frontmatter":{"authors":[{"name":"Alan Lujan"}],"github":"https://github.com/alanlujan91/SequentialEGM","keywords":[],"math":{"\\CARA":"\\alpha","\\CRRA":"\\rho","\\PtyLab":"\\mathrm{Z}","\\ptyLab":"z","\\TaxComb":"\\mathcal{T}","\\Prob":"\\mathbb{P}","\\DiePrb":"\\mathsf{D}","\\diePrb":"\\mathsf{d}","\\LivPrb":"\\cancel{\\DiePrb}","\\livPrb":"\\cancel{\\diePrb}","\\DiscFac":"\\beta","\\DieFac":"\\pDead","\\GroFac":"\\Omega","\\BalGroFac":"\\check","\\permGroFac":"\\Gamma","\\PermGroFac":"\\pmb{\\Phi}","\\PopnGroFac":"\\Xi","\\APFac":"\\text{\\pmb{\\Thorn}}","\\PopFac":"\\PopGro","\\RPFac":"\\APFac_{\\Rfree}","\\DeprFac":"\\daleth","\\LivFac":"\\Alive","\\aVec":"\\vec{\\mathrm{\\aNrm}}","\\bVec":"\\vec{\\mathrm{\\bNrm}}","\\cVec":"\\vec{\\mathrm{\\cNrm}}","\\mVec":"\\vec{\\mathrm{\\mNrm}}","\\yVec":"\\vec{\\mathrm{\\yNrm}}","\\Inc":"Y","\\inc":"y","\\PInc":"P","\\AFunc":"\\mathrm{A}","\\aFunc":"\\mathrm{a}","\\BFunc":"\\mathrm{B}","\\bFunc":"\\mathrm{b}","\\CFunc":"\\mathrm{C}","\\cFunc":"\\mathrm{c}","\\MPCFunc":"\\pmb{\\kappa}","\\DFunc":"\\mathrm{D}","\\dFunc":"\\mathrm{d}","\\bEndFunc":"\\mathfrak{b}","\\CEndFunc":"\\mathfrak{C}","\\cEndFunc":"\\mathfrak{c}","\\dEndFunc":"\\mathfrak{d}","\\lEndFunc":"\\mathfrak{l}","\\mEndFunc":"\\mathfrak{m}","\\nEndFunc":"\\mathfrak{n}","\\VEndFunc":"\\mathfrak{V}","\\vEndFunc":"\\mathfrak{v}","\\zEndFunc":"\\mathfrak{z}","\\ProdFunc":"\\mathrm{F}","\\prodFunc":"\\mathrm{f}","\\EFunc":"\\mathrm{E}","\\eFunc":"\\mathrm{e}","\\FFunc":"\\mathrm{F}","\\fFunc":"\\mathrm{f}","\\GFunc":"\\mathrm{G}","\\gFunc":"\\mathrm{g}","\\vBegFunc":"\\pmb{\\upsilon}","\\HFunc":"\\mathrm{H}","\\hFunc":"\\mathrm{h}","\\IFunc":"\\mathrm{I}","\\iFunc":"\\mathrm{i}","\\chiFunc":"\\pmb{\\chi}","\\phiFunc":"\\digamma","\\JFunc":"\\mathrm{J}","\\jFunc":"\\mathrm{j}","\\KFunc":"\\mathrm{K}","\\kFunc":"\\mathrm{k}","\\LFunc":"\\mathrm{L}","\\utilFunc":"\\mathrm{u}","\\MFunc":"\\mathrm{M}","\\mFunc":"\\mathrm{m}","\\NFunc":"\\mathrm{N}","\\nFunc":"\\mathrm{n}","\\OFunc":"\\mathrm{O}","\\PFunc":"\\mathrm{P}","\\pFunc":"\\mathrm{p}","\\QFunc":"\\mathrm{Q}","\\RFunc":"\\mathrm{R}","\\rFunc":"\\mathrm{r}","\\SFunc":"\\mathrm{S}","\\sFunc":"\\mathrm{s}","\\MPSFunc":"\\pmb{lambda}","\\TFunc":"\\mathrm{T}","\\UFunc":"\\mathrm{U}","\\uFunc":"\\mathrm{u}","\\VFunc":"\\mathrm{V}","\\vFunc":"\\mathrm{v}","\\cPDVFunc":"\\mathbb{C}","\\pPDVFunc":"\\mathbb{P}","\\uPDVFunc":"\\mathbb{U}","\\cLevFunc":"\\pmb{\\cFunc}","\\VLevFunc":"\\pmb{\\mathrm{V}}","\\vLevFunc":"\\pmb{\\mathrm{v}}","\\RevFunc":"\\pmb{\\Pi}","\\revFunc":"\\pmb{\\pi}","\\WFunc":"\\mathrm{W}","\\wFunc":"\\mathrm{w}","\\XFunc":"\\mathrm{X}","\\xFunc":"\\mathrm{x}","\\YFunc":"\\mathrm{Y}","\\yFunc":"\\mathrm{y}","\\ZFunc":"\\mathrm{Z}","\\zFunc":"\\mathrm{z}","\\MPC":"\\kappa","\\PIHMPC":"\\varkappa","\\MinMPC":"\\uline{\\kappa}","\\MinMinMPC":"\\underline{\\kappa}","\\MaxMinMPC":"\\hat{\\underline{\\kappa}}","\\MaxMPC":"\\bar{\\kappa}","\\MaxMaxMPC":"\\bar{\\bar{\\kappa}}","\\itc":"\\zeta","\\kPriceAfterITC":"\\mathscr{P}","\\PostITC":"\\cancel{\\zeta}","\\pDead":"\\mathfrak{D}","\\TaxPaid":"T","\\WMid":"\\BLev","\\wMid":"\\bLev","\\Wmid":"\\BRat","\\wmid":"\\bRat","\\Dvdnd":"\\mathbf{D}","\\dvdnd":"d","\\edvdnd":"\\grave{\\dvdnd}","\\hEnd":"\\mathfrak{h}","\\GovSpend":"X","\\govSpend":"x","\\xpend":"\\xi","\\expend":"\\xi","\\TEnd":"T","\\VEnd":"\\mathfrak{V}","\\vEnd":"\\mathfrak{v}","\\WEnd":"\\ALev","\\wEnd":"\\aLev","\\Wend":"\\ARat","\\wend":"\\aRat","\\permGroFacInd":"\\pmb{\\phi}","\\permShkInd":"\\psi","\\tranShkInd":"\\theta","\\permLvlInd":"\\mathrm{p}","\\RCpnd":"\\mathbf{R}","\\Mod":"\\tilde","\\Rprod":"\\mathscr{R}","\\rprod":"\\mathscr{r}","\\RProd":"\\mathsf{R}","\\rProd":"\\mathsf{r}","\\tranShkIndStd":"\\sigma_{\\tranShkInd}","\\tranShkAggStd":"\\sigma_{\\tranShkAgg}","\\ShkMeanOneLogStd":"\\sigma_{\\ShkMeanOneLog}","\\ShkLogZeroLogStd":"\\sigma_{\\cancel{\\ShkMeanOneLog}}","\\PermShkStd":"\\sigma_{\\PermShk}","\\TranShkStd":"\\sigma_{\\TranShk}","\\prud":"\\eta","\\tFwd":"n","\\aE":"\\aRat^{e}","\\BE":"\\BRat^{e}","\\bE":"\\bRat^{e}","\\CE":"\\CRat^{e}","\\cE":"\\cRat^{e}","\\Price":"\\mathsf{P}","\\kPrice":"\\mathsf{P}","\\Severance":"\\kappa","\\MPCE":"\\MPC^{e}","\\Rfree":"\\mathsf{R}","\\rfree":"\\mathsf{r}","\\TaxFree":"\\cancel{\\Tax}","\\Age":"Z","\\age":"z","\\Wage":"\\mathsf{W}","\\wage":"\\mathsf{w}","\\bTargE":"\\check{b}^{e}","\\CTargE":"\\CTarg^{\\null}","\\cTargE":"\\Target{c}^{e}","\\kTargE":"\\Target{k}^{e}","\\STargE":"\\Target{\\SRat}^{\\null}","\\sTargE":"\\Target{\\sRat}^{\\null}","\\yTargE":"\\check{y}^{e}","\\ME":"\\MRat^{e}","\\mE":"\\mRat^{e}","\\TermTime":"T","\\ShkMeanOne":"\\Theta","\\PopE":"\\mathcal{E}","\\popE":"e","\\labShare":"\\nu","\\leiShare":"\\zeta","\\kapShare":"\\alpha","\\riskyshare":"\\varsigma","\\Retire":"\\mathbb{R}","\\WPre":"K","\\wPre":"k","\\Leisure":"Z","\\leisure":"z","\\SE":"\\SRat^{e}","\\sE":"\\sRat^{e}","\\BRatE":"B}^{e","\\bRatE":"b}^{e","\\CRatE":"\\CRat^{e}","\\cRatE":"\\cRat^{e}","\\DiscRate":"\\vartheta","\\pDeadRate":"\\grave{\\cancel{\\mathsf{d}}}","\\erate":"\\cancel{\\mho}","\\pDieRate":"\\grave{\\mathsf{d}}","\\timeRate":"\\vartheta","\\saveRate":"\\grave{s}","\\MRatE":"\\MRat^{e}","\\mRatE":"\\mRat^{e}","\\SRatE":"\\SRat^{e}","\\sRatE":"\\sRat^{e}","\\srate":"\\varsigma","\\urate":"\\mho","\\TaxRate":"t","\\empState":"\\xi","\\discRte":"\\tau","\\DiscRte":"\\vartheta","\\GroRte":"\\omega","\\BalGroRte":"\\tilde","\\permGroRte":"\\gamma","\\PermGroRte":"\\varphi","\\PopnGroRte":"\\xi","\\APRte":"\\text{\\thorn}","\\GPRte":"\\text{\\thorn}_{\\PermGroRte}","\\popRte":"\\popGro","\\RPRte":"\\text{\\thorn}_{\\rfree}","\\deprRte":"\\delta","\\Value":"\\mathrm{V}","\\VE":"V}^{e","\\vE":"v}^{e","\\Save":"S","\\save":"s","\\RSave":"\\underline{\\Rfree}","\\rsave":"\\underline{\\rfree}","\\Abve":"\\bar","\\BLevE":"\\BLev^{e}","\\bLevE":"\\bLev^{e}","\\CLevE":"\\CLev^{e}","\\cLevE":"\\cLev^{e}","\\mLevE":"\\mLev^{e}","\\SLevE":"\\SLev^{e}","\\sLevE":"\\sLev^{e}","\\Alive":"\\mathcal{L}","\\cFuncAbove":"\\bar{\\mathrm{c}}","\\aRatBF":"\\pmb{a}","\\bRatBF":"\\pmb{\\mathrm{b}}","\\cRatBF":"\\pmb{c}","\\mRatBF":"\\pmb{\\mathrm{m}}","\\ALevBF":"\\mathbf{A}","\\aLevBF":"\\mathbf{a}","\\BLevBF":"\\mathbf{B}","\\bLevBF":"\\mathbf{b}","\\CLevBF":"\\mathbf{C}","\\cLevBF":"\\mathbf{c}","\\HLevBF":"\\mathbf{H}","\\hLevBF":"\\mathbf{h}","\\KLevBF":"\\mathbf{K}","\\kLevBF":"\\mathbf{k}","\\LLevBF":"\\mathbf{L}","\\lLevBF":"\\pmb{\\ell}","\\MLevBF":"\\mathbf{M}","\\mLevBF":"\\mathbf{m}","\\OLevBF":"\\mathbf{O}","\\oLevBF":"\\mathbf{o}","\\PLevBF":"\\mathbf{P}","\\pLevBF":"\\mathbf{p}","\\SLevBF":"\\mathbf{S}","\\sLevBF":"\\mathbf{s}","\\vLevBF":"\\mathbf{v}","\\YLevBF":"\\mathbf{Y}","\\yLevBF":"\\mathbf{y}","\\ZLevBF":"\\mathbf{Z}","\\zLevBF":"\\pmb{z}","\\CDF":"\\mathcal{F}","\\SDF":"\\MLev","\\RfreeEff":"\\bar{\\Rfree}","\\CGroPF":"\\Lambda","\\cGroPF":"\\lambda","\\WGroPF":"\\mathrm{G}","\\MPCPPF":"\\Pi","\\vBeg":"\\upsilon","\\WBeg":"\\KLev","\\wBeg":"\\kLev","\\aAgg":"\\mathsf{A}","\\cAgg":"\\pmb{C}","\\permGroFacAgg":"\\Phi","\\RfreeAgg":"\\Agg{\\Rfree}","\\PermShkAgg":"\\Psi","\\permShkAgg":"\\Psi","\\TranShkAgg":"\\Theta","\\tranShkAgg":"\\Theta","\\permLvlAgg":"\\mathrm{P}","\\PermLvlAgg":"\\PLvl","\\zAgg":"\\pmb{Z}","\\ShkMeanOneLog":"\\theta","\\mBalLog":"\\BalGroRte{\\mNrm}","\\EpremLog":"\\varphi","\\ShkLogZeroLog":"\\cancel{\\ShkMeanOneLog}","\\pLog":"p","\\ImpG":"\\Im}_{\\PGro","\\impg":"\\imath}_{\\pGro","\\ATarg":"\\check{A}","\\aTarg":"\\check{a}","\\BTarg":"\\check{B}","\\bTarg":"\\check{b}","\\CTarg":"\\Target{C}","\\cTarg":"\\Target{c}","\\BTargTarg":"\\Target{\\Target{\\BRat}}","\\bTargTarg":"\\Target{\\Target{\\bRat}}","\\cTargTarg":"\\Target{\\Target{\\cRat}}","\\STargTarg":"\\Target{\\Target{\\SRat}}","\\sTargTarg":"\\Target{\\Target{\\sRat}}","\\kTarg":"\\Target{k}","\\mTarg":"\\check{m}","\\STarg":"\\Target{\\SRat}","\\sTarg":"\\Target{\\sRat}","\\vTarg":"\\Target{\\vRat}","\\yTarg":"\\check{y}","\\CGroOverG":"\\Upsilon","\\avg":"\\bar","\\h":"h","\\Wealth":"O","\\wealth":"o","\\Hi":"\\hat","\\Chi":"\\mathrm{X}","\\NI":"Z","\\TaxUI":"\\tau","\\adj":"\\mathrm{j}","\\PermGroFacAdj":"\\underline{\\PermGroFac}","\\PGroAdj":"\\underline{\\PGro}","\\pGroAdj":"\\underline{\\pGro}","\\PatPGroAdj":"\\text{\\pmb{\\Thorn}}_{\\underline{\\PGro}}","\\patpGroAdj":"\\text{\\thorn}_{\\underline{\\pGro}}","\\PermGroFacuAdj":"\\underline{\\underline{\\PermGroFac}}","\\PGrouAdj":"\\underline{\\underline{\\PGro}}","\\pGrouAdj":"\\underline{\\underline{\\pGro}}","\\DiscAltuAdj":"\\underline{\\underline{\\beth}}","\\TEndBak":"\\mathsf{p}","\\tBak":"\\pmb{n}","\\TEatBak":"\\mathtt{q}","\\ek":"\\lambda","\\Shk":"\\Phi","\\shk":"\\phi","\\PermShk":"\\mathbf{\\Psi}","\\permShk":"\\psi","\\uInvEuPermShk":"\\underline{\\underline{\\PermShk}}","\\TranShk":"\\pmb{\\xi}","\\PShk":"\\Psi","\\pShk":"\\psi","\\pshk":"\\psi","\\TShk":"\\Xi","\\tShk":"\\xi","\\tshk":"\\xi","\\Work":"\\mathbb{W}","\\vk":"\\lambda","\\util":"u","\\TranShkAll":"\\pmb{\\xi}","\\tShkAll":"\\xi","\\WAll":"O","\\wAll":"o","\\Lvl":"\\mathbf","\\ALvl":"\\mathbf{A}","\\aLvl":"\\mathbf{a}","\\BLvl":"\\mathbf{B}","\\bLvl":"\\mathbf{b}","\\CLvl":"\\mathbf{C}","\\cLvl":"\\mathbf{c}","\\DLvl":"\\mathbf{D}","\\dLvl":"\\mathbf{d}","\\ELvl":"\\mathbf{E}","\\eLvl":"\\mathbf{e}","\\FLvl":"\\mathbf{F}","\\fLvl":"\\mathbf{f}","\\GLvl":"\\mathbf{G}","\\HLvl":"\\mathbf{H}","\\hLvl":"\\mathbf{h}","\\ILvl":"\\mathbf{I}","\\iLvl":"\\mathbf{i}","\\JLvl":"\\mathbf{J}","\\jLvl":"\\mathbf{j}","\\KLvl":"\\mathbf{K}","\\kLvl":"\\mathbf{k}","\\LLvl":"\\mathbf{L}","\\ABalLvl":"\\BalGroFac{\\ALvl}","\\MBalLvl":"\\BalGroFac{\\MNrm}","\\mBalLvl":"\\BalGroFac{\\mNrm}","\\MLvl":"\\mathbf{M}","\\mLvl":"\\mathbf{m}","\\PermLvl":"\\pLvl","\\NLvl":"\\mathbf{N}","\\PopnLvl":"\\pmb{\\mathrm{N}}","\\OLvl":"\\mathbf{O}","\\PLvl":"\\mathbf{P}","\\pLvl":"\\mathbf{p}","\\QLvl":"\\mathbf{Q}","\\RLvl":"\\mathbf{R}","\\rLvl":"\\mathbf{r}","\\SLvl":"\\mathbf{S}","\\sLvl":"\\mathbf{s}","\\TLvl":"\\mathbf{T}","\\ULvl":"\\mathbf{U}","\\VLvl":"\\mathbf{V}","\\vLvl":"\\mathbf{v}","\\WLvl":"\\mathbf{W}","\\XLvl":"\\mathbf{X}","\\YLvl":"\\mathbf{Y}","\\yLvl":"\\mathbf{y}","\\ZLvl":"\\mathbf{Z}","\\zLvl":"\\mathbf{z}","\\Ham":"\\mathcal{H}","\\EPrem":"\\Phi","\\eprem":"\\varphi","\\tHorOfm":"\\pmb{n}","\\debtLim":"\\mathsf{d}","\\tTerm":"T","\\vFirm":"\\mathrm{e}","\\ANrm":"A","\\aNrm":"a","\\BNrm":"B","\\bNrm":"b","\\CNrm":"C","\\cNrm":"c","\\GPFacNrm":"\\APFac_{\\PermGroFacAdj}","\\DNrm":"D","\\dNrm":"d","\\ENrm":"E","\\eNrm":"e","\\FNrm":"F","\\fNrm":"f","\\bTrgNrm":"\\TargetNrm{\\bNrm}","\\mTrgNrm":"\\TargetNrm{\\mNrm}","\\HNrm":"H","\\hNrm":"h","\\INrm":"I","\\iNrm":"i","\\JNrm":"J","\\jNrm":"j","\\KNrm":"K","\\kNrm":"k","\\MNrm":"M","\\mNrm":"m","\\PNrm":"P","\\pNrm":"p","\\RNrm":"\\mathcal{R}","\\rNrm":"s","\\SNrm":"S","\\sNrm":"s","\\TargetNrm":"\\hat","\\VNrm":"V","\\vNrm":"v","\\xNrm":"x","\\YNrm":"Y","\\yNrm":"y","\\ZNrm":"Z","\\zNrm":"z","\\Rnorm":"\\mathcal{R}","\\rnorm":"\\mathit{r}","\\vNorm":"\\mathrm{w}","\\WHum":"\\HLev","\\wHum":"\\hLev","\\Whum":"\\HRat","\\whum":"\\hRat","\\Num":"N","\\VNum":"V","\\vNum":"v","\\Mean":"\\mathbb{M}","\\tThen":"\\tau","\\valfn":"\\mathrm{v}","\\aMin":"\\underline{\\aRat}","\\bMin":"\\underline{\\bRat}","\\MPCmin":"\\uline{\\kappa}","\\hEndMin":"\\underline{\\mathfrak{h}}","\\aboveMin":"\\blacktriangle","\\hMin":"\\underline{\\h}","\\HMin":"\\underline{H}","\\pShkMin":"\\underline{\\psi}","\\whumMin":"\\underline{\\hRat}","\\MPCminmin":"\\underline{\\kappa}","\\TranShkEmpMin":"\\underline{\\TranShkEmp}","\\tShkEmpMin":"\\underline{\\theta}","\\MPSmin":"\\pZero^{1/\\CRRA} \\RPFac","\\MPCmaxmin":"\\hat{\\underline{\\kappa}}","\\Decision":"\\mathbb{D}","\\SeveranceRatio":"\\varsigma","\\Lo":"\\check","\\ShkLogZero":"\\cancel{\\ShkMeanOne}","\\pZero":"\\wp","\\pNotZero":"(1-\\pZero)","\\LGro":"\\Lambda","\\lGro":"\\lambda","\\PGro":"\\Gamma","\\pGro":"\\gamma","\\GDPGro":"\\gimel","\\EmpGro":"\\Xi","\\empGro":"\\xi","\\PopGro":"\\Xi","\\popGro":"\\xi","\\PatPGro":"\\text{\\pmb{\\Thorn}}_{\\PGro}","\\patpGro":"\\text{\\thorn}_{\\pGro}","\\XperGro":"\\mathsf{X}","\\xperGro":"\\mathsf{x}","\\DivGro":"\\mathrm{G}","\\divGro":"\\mathsf{g}","\\WGro":"\\mathrm{G}","\\wGro":"\\mathsf{g}","\\RnormWGro":"\\mathcal{R}_{\\WGro}","\\rnormwGro":"\\mathit{r}_{\\wGro}","\\PatWGro":"\\text{\\pmb{\\Thorn}}_{\\WGro}","\\patwGro":"\\text{\\thorn}_{\\wGro}","\\PtyGro":"\\Phi","\\ptyGro":"\\phi","\\RBoro":"\\bar{\\Rfree}","\\rboro":"\\bar{\\rfree}","\\Pareto":"\\zeta","\\Kap":"K","\\kap":"k","\\EEndMap":"\\mathsf{E}","\\TMap":"\\mathscr{T}","\\cP":"\\cons^{\\prime}","\\MPCP":"\\pi","\\taxDep":"\\partial","\\FP":"\\mathrm{F}^{\\prime}","\\fP":"\\mathrm{f}^{\\prime}","\\TranShkEmp":"\\pmb{\\theta}","\\TShkEmp":"\\Theta","\\tShkEmp":"\\theta","\\IncUnemp":"\\mu","\\Pop":"L","\\cPP":"\\cons^{\\prime\\prime}","\\FPP":"\\mathrm{F}^{\\prime\\prime}","\\fPP":"\\mathrm{f}^{\\prime\\prime}","\\cPPP":"\\cons^{\\prime\\prime\\prime}","\\uPPP":"\\mathrm{u}^{\\prime\\prime\\prime}","\\uPP":"\\mathrm{u}^{\\prime\\prime}","\\TaxCorp":"\\Large \\tau","\\taxCorp":"\\tau","\\uP":"\\mathrm{u}^{\\prime}","\\q":"\\koppa","\\adjPar":"\\omega","\\tranShkIndVar":"\\sigma^{2}_{\\tranShkInd}","\\tranShkAggVar":"\\sigma^{2}_{\\tranShkAgg}","\\ShkMeanOneLogVar":"\\sigma^{2}_{\\ShkMeanOneLog}","\\ShkLogZeroLogVar":"\\sigma_{\\cancel{\\ShkMeanOneLog}}^{2}","\\PermShkVar":"\\sigma^{2}_{\\PermShk}","\\TranShkVar":"\\sigma^{2}_{\\TranShk}","\\sdr":"\\mRat","\\Estdr":"\\sigma_{\\risky}","\\xFer":"\\chi","\\XFer":"X","\\nIter":"n","\\power":"\\eta","\\labor":"\\ell","\\Labor":"\\mathrm{L}","\\PLabor":"P","\\Plabor":"P","\\tHor":"\\mathsf{n}","\\error":"\\epsilon","\\Depr":"\\daleth","\\depr":"\\delta","\\ImpR":"\\Im}_{\\Rfree","\\impr":"\\imath}_{\\rfree","\\EVarr":"\\sigma_{\\Risky}^{2}","\\Evarr":"\\sigma_{\\risky}^{2}","\\Err":"Z","\\err":"z","\\CGroOverR":"\\Phi","\\corr":"\\varrho","\\curr":"1","\\Curr":"t","\\tCurr":"t","\\PatR":"\\text{\\pmb{\\Thorn}}_{\\Rfree}","\\patr":"\\text{\\thorn}_{\\rfree}","\\PDies":"\\mathsf{D}","\\pDies":"\\mathsf{d}","\\PLives":"\\cancel{\\PDies}","\\pLives":"\\cancel{\\pDies}","\\Stocks":"S","\\stocks":"s","\\TaxNetTrans":"Z","\\taxNetTrans":"z","\\unins":"\\zeta","\\Cons":"C","\\cons":"c","\\MPS":"\\lambda","\\MinMPS":"\\pZero^{1/\\CRRA} \\PatR","\\MaxMPS":"\\PatR","\\CGroPS":"\\chi","\\Hours":"\\mathfrak{H}","\\hours":"\\mathfrak{h}","\\ASS":"A","\\aSS":"a","\\cEss":"c}^{e","\\mEss":"\\check{m}^{e}","\\vEss":"\\check{v}^{e}","\\MSS":"\\breve{M}","\\mSS":"\\breve{m}","\\RGross":"\\breve{\\mathsf{R}}","\\rGross":"\\breve{\\mathsf{r}}","\\tSS":"t","\\effUnits":"X","\\Surplus":"Z","\\surplus":"z","\\TEat":"\\TEnd","\\patpGrohat":"\\hat{\\text{\\thorn}}_{\\pGro}","\\aMat":"[{\\mathrm{\\aNrm}}]","\\bMat":"[{\\mathrm{\\bNrm}}]","\\cMat":"[{\\mathrm{\\cNrm}}]","\\tShkMat":"[{\\mathrm{\\tShkEmp}}]","\\mMat":"[{\\mathrm{\\mNrm}}]","\\xMat":"[{\\mathrm{\\xNrm}}]","\\yMat":"[{\\mathrm{\\yNrm}}]","\\Pat":"\\text{\\pmb{\\Thorn}}","\\pat":"\\text{\\thorn}","\\ARat":"A","\\aRat":"a","\\NFARat":"\\NRat","\\BRat":"B","\\bRat":"b","\\CRat":"C","\\cRat":"c","\\ccRat":"\\mathsf{c}","\\dRat":"d","\\WEndRat":"\\ARat","\\wEndRat":"\\aRat","\\HRat":"H","\\hRat":"h","\\IRat":"I","\\iRat":"i","\\KRat":"K","\\kRat":"k","\\LRat":"L","\\lRat":"l","\\WAllRat":"O","\\wAllRat":"o","\\MRat":"M","\\mRat":"m","\\NRat":"N","\\nRat":"n","\\ORat":"O","\\oRat":"o","\\pRat":"p","\\GDPRat":"P","\\gdpRat":"p","\\SRat":"S","\\sRat":"s","\\VRat":"V","\\vRat":"v","\\WRat":"O","\\wRat":"o","\\XRat":"X","\\xRat":"x","\\YRat":"Y","\\yRat":"y","\\ZRat":"Z","\\zRat":"z","\\Debt":"D","\\debt":"d","\\Target":"\\check","\\WNet":"X","\\wNet":"x","\\straight":"\\Pi","\\weight":"\\omega","\\Habit":"H","\\habit":"h","\\WMkt":"\\MLev","\\wMkt":"\\mLev","\\wmkt":"\\mLev","\\Alt":"\\grave","\\DiscFacAlt":"\\beth","\\DiscAlt":"\\beth","\\ValAlt":"\\mathcal{V}","\\vOptAlt":"\\Alt{\\tilde{\\mathfrak{v}}}","\\RiskyAlt":"\\pmb{\\mathfrak{R}}","\\riskyAlt":"\\pmb{\\mathfrak{r}}","\\uPmt":"\\mu","\\SeverancePayment":"\\mathcal{S}","\\kapRent":"\\varkappa","\\Discount":"\\beta","\\tinyAmount":"\\epsilon","\\WTot":"\\mathbf{O}","\\wTot":"\\mathbf{o}","\\Wtot":"O","\\wtot":"o","\\vOpt":"\\tilde{\\mathfrak{v}}","\\Rport":"\\mathbb{R}","\\rport":"\\mathbb{r}","\\FDist":"\\mathcal{F}","\\fDist":"\\mathcal{f}","\\Next":"t+1","\\tNext":"t+1","\\BU":"B}^{u","\\bU":"b}^{u","\\CU":"\\CRat^{u}","\\cU":"\\cRat^{u}","\\MPCU":"\\MPC^{u}","\\MU":"M}^{u","\\mU":"m}^{u","\\PopU":"\\mathcal{U}","\\SU":"\\SRat^{u}","\\sU":"\\sRat^{u}","\\PatU":"\\text{\\pmb{\\Thorn}}_{\\urate}","\\patu":"\\text{\\thorn}_{\\urate}","\\bRatU":"b}^{u","\\CRatU":"\\CRat^{u}","\\cRatU":"\\cRat^{u}","\\SRatU":"\\SRat^{u}","\\sRatU":"\\sRat^{u}","\\VU":"V}^{u","\\vU":"v}^{u","\\BLevU":"\\BLev^{u}","\\bLevU":"\\bLev^{u}","\\CLevU":"\\CLev^{u}","\\cLevU":"\\cLev^{u}","\\SLevU":"\\SLev^{u}","\\sLevU":"\\sLev^{u}","\\pSav":"\\phi","\\PDV":"\\mathbb{P}","\\CPDV":"\\text{PDV($C$)}","\\PPDV":"\\text{PDV($P$)}","\\ALev":"A","\\aLev":"a","\\NFALev":"\\NLev","\\BLev":"B","\\bLev":"b","\\CLev":"C","\\cLev":"c","\\DLev":"D","\\ELev":"E","\\FLev":"F","\\fLev":"f","\\GLev":"G","\\HLev":"\\pmb{H}","\\hLev":"\\pmb{h}","\\ILev":"I","\\iLev":"i","\\JLev":"J","\\KLev":"K","\\kLev":"k","\\lLev":"\\ell","\\LLev":"L","\\WAllLev":"\\mathbf{O}","\\wAllLev":"\\mathbf{o}","\\MLev":"M","\\mLev":"m","\\NLev":"N","\\nLev":"n","\\oLev":"\\pmb{o}","\\OLev":"O","\\pLev":"\\pmb{p}","\\PLev":"P","\\GDPLev":"\\pmb{P}","\\gdpLev":"\\pmb{p}","\\PopLev":"\\pmb{N}","\\QLev":"Q","\\RLev":"R","\\SLev":"S","\\sLev":"s","\\TLev":"T","\\ULev":"U","\\uLev":"u","\\VLev":"V","\\vLev":"v","\\wLev":"\\pmb{w}","\\WLev":"W","\\XLev":"X","\\xLev":"x","\\TaxLev":"T","\\YLev":"Y","\\yLev":"y","\\PtyLev":"A","\\ptyLev":"a","\\ZLev":"Z","\\zLev":"z","\\Rev":"\\Pi","\\rev":"\\pi","\\tPrev":"t-1","\\Div":"D","\\DiscFacLiv":"\\underline{\\DiscFacRaw}","\\Inv":"I","\\inv":"i","\\TaxCombInv":"\\mathcal{T}^{-1}","\\EPermShkInv":"\\Ex[\\PermShk^{-1}]","\\InvEPermShkInv":"\\underline{\\PermShk}","\\EpShkInv":"\\Ex[\\pShk^{-1}]","\\InvEpShkInv":"\\underline{\\psi}","\\uInvEpShkuInv":"\\underline{\\underline{\\psi}}","\\VInv":"\\Lambda","\\vInv":"\\scriptstyle \\Lambda \\displaystyle","\\cov":"\\textup{cov}","\\DiscFacRaw":"\\beta","\\GPFacRaw":"\\APFac_{\\PermGroFac}","\\Belw":"\\ushort","\\GovNW":"N","\\govNW":"n","\\cFuncBelow":"\\uline{\\mathrm{c}}","\\tNow":"t","\\cFuncMax":"\\bar{\\bar{\\mathrm{c}}}","\\MPCmax":"\\bar{\\kappa}","\\MPSmax":"\\RPFac","\\MPCmaxmax":"\\bar{\\bar{\\kappa}}","\\Tax":"\\tau","\\tax":"\\tau","\\Ex":"\\mathbb{E}","\\prudEx":"\\omega","\\Steady":"\\bar","\\Risky":"\\mathbf{R}","\\risky":"\\mathbf{r}","\\Seniority":"\\mathsf{X}","\\seniority":"\\mathsf{x}"},"exports":[{"format":"ipynb","filename":"PensionContrib.ipynb","url":"/PensionContrib-6fb74a6093c990285edfd27c95cd1c27.ipynb"}]},"kind":"Notebook","file":"C:\\Users\\alujan\\GitHub\\alanlujan91\\SequentialEGM\\Code\\EGMN\\PensionContrib.ipynb","sha256":"791048bde21d8c81903b295a1abd0c38d61751ac7d921fd2cb8e6848ace40aab","slug":"pensioncontrib","mdast":{"type":"root","children":[{"type":"block","position":{"start":{"line":0,"column":0},"end":{"line":1,"column":0}},"children":[{"type":"code","lang":"python","value":"import matplotlib.pyplot as plt\nimport numpy as np\nfrom ConsPensionContribModel import PensionContribConsumerType\nfrom IPython import get_ipython\n\nfigures_path = \"../Figures/\"","position":{"start":{"line":2,"column":0},"end":{"line":10,"column":0}},"key":"ajD7JdUSpD"}],"data":{"collapsed":false,"jupyter":{"outputs_hidden":false},"pycharm":{"name":"#%%\n"}},"key":"upzAyErzLF"},{"type":"block","position":{"start":{"line":11,"column":0},"end":{"line":12,"column":0}},"children":[{"type":"code","lang":"python","value":"agent = PensionContribConsumerType(cycles=19)","position":{"start":{"line":13,"column":0},"end":{"line":16,"column":0}},"key":"xPHrUjq7rJ"}],"data":{"collapsed":false,"jupyter":{"outputs_hidden":false},"pycharm":{"name":"#%%\n"}},"key":"jfQLEsCWLb"},{"type":"block","position":{"start":{"line":17,"column":0},"end":{"line":18,"column":0}},"children":[{"type":"code","lang":"python","value":"def plot_bilinear(function):\n    x_list = function.x_list\n    f_vals = function.f_values\n\n    plt.plot(x_list, f_vals)\n\n\ndef plot_3d_func(func, min, max, n=100):\n    # get_ipython().run_line_magic(\"matplotlib\", \"widget\")\n    xgrid = np.linspace(min, max, n)\n    ygrid = xgrid\n\n    xMat, yMat = np.meshgrid(xgrid, ygrid, indexing=\"ij\")\n\n    zMat = func(xMat, yMat)\n\n    ax = plt.axes(projection=\"3d\")\n    ax.plot_surface(xMat, yMat, zMat, cmap=\"viridis\")\n    ax.set_title(\"surface\")\n    ax.set_xlabel(\"m\")\n    ax.set_ylabel(\"n\")\n    ax.set_zlabel(\"f\")\n    plt.show()","position":{"start":{"line":19,"column":0},"end":{"line":44,"column":0}},"key":"jaKnD1ncgt"}],"data":{"collapsed":false,"jupyter":{"outputs_hidden":false},"pycharm":{"name":"#%%\n"}},"key":"gUaSeKCTZy"},{"type":"block","position":{"start":{"line":45,"column":0},"end":{"line":46,"column":0}},"children":[{"type":"code","lang":"python","value":"agent.solve()\n\nT = 0","position":{"start":{"line":47,"column":0},"end":{"line":52,"column":0}},"key":"aKDBhUrQ5b"}],"data":{"collapsed":false,"jupyter":{"outputs_hidden":false},"lines_to_next_cell":2,"pycharm":{"name":"#%%\n"}},"key":"DcJW643IBR"},{"type":"block","position":{"start":{"line":53,"column":0},"end":{"line":54,"column":0}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":55,"column":0},"end":{"line":56,"column":0}},"children":[{"type":"text","value":"Post Decision Stage","key":"f9F0S1d96M"}],"identifier":"post-decision-stage","label":"Post Decision Stage","html_id":"post-decision-stage","implicit":true,"key":"i0R5JGC0MB"}],"data":{},"key":"kFCX88YKDb"},{"type":"block","position":{"start":{"line":57,"column":0},"end":{"line":58,"column":0}},"children":[{"type":"code","lang":"python","value":"plot_3d_func(agent.solution[T].post_decision_stage.v_func.vFuncNvrs, 0, 5)","position":{"start":{"line":59,"column":0},"end":{"line":62,"column":0}},"key":"YAv65vySyP"},{"type":"output","id":"k3Do7i2l7IZw88fawQA87","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"04dcc31daf666a75468cb666fd548d8d","path":"/_static/04dcc31daf666a75468cb666fd548d8d.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}}],"key":"K8T72ZnUel"}],"data":{"lines_to_next_cell":2},"key":"BxHTN4EvQ9"},{"type":"block","position":{"start":{"line":67,"column":0},"end":{"line":68,"column":0}},"children":[{"type":"code","lang":"python","value":"plot_3d_func(agent.solution[T].post_decision_stage.dvda_func.cFunc, 0, 5)","position":{"start":{"line":69,"column":0},"end":{"line":72,"column":0}},"key":"ElH0XAb316"},{"type":"output","id":"4ImfeL0Rn_gQDG53U2iQw","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"bedd81eee85bcebb5039b161f5d68520","path":"/_static/bedd81eee85bcebb5039b161f5d68520.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}}],"key":"F9Y8FVAV0F"}],"data":{},"key":"QIJxgb8anp"},{"type":"block","position":{"start":{"line":77,"column":0},"end":{"line":78,"column":0}},"children":[{"type":"code","lang":"python","value":"plot_3d_func(agent.solution[T].post_decision_stage.dvdb_func.cFunc, 0, 5)","position":{"start":{"line":79,"column":0},"end":{"line":82,"column":0}},"key":"nRD1GWfGqA"},{"type":"output","id":"Y92AyVDXMsoZxjIcPMnb0","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"1ae03914038bc1d1a6f2fe2400ba5e60","path":"/_static/1ae03914038bc1d1a6f2fe2400ba5e60.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}}],"key":"zqvdMW4D1j"}],"data":{},"key":"CmrARMsKWY"},{"type":"block","position":{"start":{"line":87,"column":0},"end":{"line":88,"column":0}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":89,"column":0},"end":{"line":90,"column":0}},"children":[{"type":"text","value":"Consumption Stage","key":"J037QDz46i"}],"identifier":"consumption-stage","label":"Consumption Stage","html_id":"consumption-stage","implicit":true,"key":"ZsMXn7G3d7"}],"data":{},"key":"A2U6GaIcCd"},{"type":"block","position":{"start":{"line":91,"column":0},"end":{"line":92,"column":0}},"children":[{"type":"code","lang":"python","value":"plot_3d_func(agent.solution[T].consumption_stage.c_func, 0, 5)","position":{"start":{"line":93,"column":0},"end":{"line":96,"column":0}},"key":"bjZTr8UeNq"},{"type":"output","id":"SP951-IrL1fHnHJ_LV7rG","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"35f3376aab96154a8c5ba9f44b35e7d5","path":"/_static/35f3376aab96154a8c5ba9f44b35e7d5.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}}],"key":"VaM7ETeQ7n"}],"data":{"collapsed":false,"jupyter":{"outputs_hidden":false},"lines_to_next_cell":2,"pycharm":{"name":"#%%\n"}},"key":"V8aiYxDpHi"},{"type":"block","position":{"start":{"line":101,"column":0},"end":{"line":102,"column":0}},"children":[{"type":"code","lang":"python","value":"plot_3d_func(agent.solution[T].consumption_stage.v_func.vFuncNvrs, 0, 5)","position":{"start":{"line":103,"column":0},"end":{"line":106,"column":0}},"key":"pPPjj2FhA9"},{"type":"output","id":"Dw23C1LQwvvpaxqsfTiNE","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"1219dd4599b808b4f79e438384120133","path":"/_static/1219dd4599b808b4f79e438384120133.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}}],"key":"BsFALRH2PN"}],"data":{},"key":"XYm1cXHl6K"},{"type":"block","position":{"start":{"line":111,"column":0},"end":{"line":112,"column":0}},"children":[{"type":"code","lang":"python","value":"plot_3d_func(agent.solution[T].consumption_stage.dvdl_func.cFunc, 0, 5)","position":{"start":{"line":113,"column":0},"end":{"line":116,"column":0}},"key":"E2rtlwvttw"},{"type":"output","id":"jk9Nvk1KQH7BEr-N2F9S_","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"35f3376aab96154a8c5ba9f44b35e7d5","path":"/_static/35f3376aab96154a8c5ba9f44b35e7d5.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}}],"key":"lhIwbbLSPb"}],"data":{},"key":"a2oSztCX90"},{"type":"block","position":{"start":{"line":121,"column":0},"end":{"line":122,"column":0}},"children":[{"type":"code","lang":"python","value":"plot_3d_func(agent.solution[T].consumption_stage.dvdb_func.cFunc, 0, 5)","position":{"start":{"line":123,"column":0},"end":{"line":126,"column":0}},"key":"g17DNjtvpb"},{"type":"output","id":"N9JQ1bgTP_lHQRkTo62bN","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"0336bfded86c2411a66bc379e1f9c4d8","path":"/_static/0336bfded86c2411a66bc379e1f9c4d8.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}}],"key":"IGpwrSanIl"}],"data":{},"key":"IhXEyDE4na"},{"type":"block","position":{"start":{"line":131,"column":0},"end":{"line":132,"column":0}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":133,"column":0},"end":{"line":134,"column":0}},"children":[{"type":"text","value":"Deposit Stage","key":"pJOfCcPgtq"}],"identifier":"deposit-stage","label":"Deposit Stage","html_id":"deposit-stage","implicit":true,"key":"iAndggyGWF"}],"data":{},"key":"WQnO1SZK8E"},{"type":"block","position":{"start":{"line":135,"column":0},"end":{"line":136,"column":0}},"children":[{"type":"code","lang":"python","value":"plot_3d_func(agent.solution[T].deposit_stage.d_func, 0, 5)","position":{"start":{"line":137,"column":0},"end":{"line":140,"column":0}},"key":"PmM6oTK7ml"},{"type":"output","id":"_DrVgFKox1bHhN8Re3Tuq","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"a45b2cd4cf080d882f51f2ffa90f3782","path":"/_static/a45b2cd4cf080d882f51f2ffa90f3782.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}}],"key":"sPHKQWLifC"}],"data":{"lines_to_next_cell":2},"key":"zGGDUK6zTw"},{"type":"block","position":{"start":{"line":145,"column":0},"end":{"line":146,"column":0}},"children":[{"type":"code","lang":"python","value":"plot_3d_func(agent.solution[T].deposit_stage.c_func, 0, 5)","position":{"start":{"line":147,"column":0},"end":{"line":150,"column":0}},"key":"FJcghckG1l"},{"type":"output","id":"KzxnFjhLceeHClupYDFQ8","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"0c985b4b0f000309495982553dee1bf2","path":"/_static/0c985b4b0f000309495982553dee1bf2.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}}],"key":"JK1CDhr11P"}],"data":{"collapsed":false,"jupyter":{"outputs_hidden":false},"lines_to_next_cell":2,"pycharm":{"name":"#%%\n"}},"key":"F83Y0MsAEO"},{"type":"block","position":{"start":{"line":155,"column":0},"end":{"line":156,"column":0}},"children":[{"type":"code","lang":"python","value":"plot_3d_func(agent.solution[T].deposit_stage.v_func.vFuncNvrs, 0, 5)","position":{"start":{"line":157,"column":0},"end":{"line":160,"column":0}},"key":"l4SIgIsT0B"},{"type":"output","id":"kAn9zFzyAHAMBRHOuyoMz","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"308b2d5a68d640b3e451c0f1c0dd4b0a","path":"/_static/308b2d5a68d640b3e451c0f1c0dd4b0a.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}}],"key":"jA13kL0Jrh"}],"data":{},"key":"XG2Jx4em2r"},{"type":"block","position":{"start":{"line":165,"column":0},"end":{"line":166,"column":0}},"children":[{"type":"code","lang":"python","value":"plot_3d_func(agent.solution[T].deposit_stage.dvdm_func.cFunc, 0, 5)","position":{"start":{"line":167,"column":0},"end":{"line":170,"column":0}},"key":"U3au5Bpc7X"},{"type":"output","id":"0qbClQvOoI8cMePVkFw-E","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"0c985b4b0f000309495982553dee1bf2","path":"/_static/0c985b4b0f000309495982553dee1bf2.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}}],"key":"Z6gjAbAXMK"}],"data":{"lines_to_next_cell":2},"key":"pC2IFm8jxL"},{"type":"block","position":{"start":{"line":175,"column":0},"end":{"line":176,"column":0}},"children":[{"type":"code","lang":"python","value":"plot_3d_func(agent.solution[T].deposit_stage.dvdn_func.cFunc, 0, 5)","position":{"start":{"line":177,"column":0},"end":{"line":180,"column":0}},"key":"C1NP1ZcGjs"},{"type":"output","id":"QS-9g4gDL5KxsQsnwqhmc","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"57513b7543a1c617e85100405e39ae6c","path":"/_static/57513b7543a1c617e85100405e39ae6c.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}}],"key":"COx5w2nrXG"}],"data":{"collapsed":false,"jupyter":{"outputs_hidden":false},"lines_to_next_cell":2,"pycharm":{"name":"#%%\n"}},"key":"ItZX2nzETI"},{"type":"block","position":{"start":{"line":185,"column":0},"end":{"line":186,"column":0}},"children":[{"type":"code","lang":"python","value":"%time\nplot_3d_func(agent.solution[T].deposit_stage.gaussian_interp, 0, 5)","position":{"start":{"line":187,"column":0},"end":{"line":191,"column":0}},"key":"JetcUirbOW"},{"type":"output","id":"Sgr_C5JO-yYUlXrz8oUdk","data":[{"name":"stdout","output_type":"stream","text":"CPU times: total: 0 ns\nWall time: 0 ns\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"b0ec47be6ec3a42f4d7ca71d801f8504","path":"/_static/b0ec47be6ec3a42f4d7ca71d801f8504.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}}],"key":"oLmLwe7TeP"}],"data":{"collapsed":false,"jupyter":{"outputs_hidden":false},"lines_to_next_cell":2,"pycharm":{"name":"#%%\n"}},"key":"MvIWOO8nEO"},{"type":"block","position":{"start":{"line":196,"column":0},"end":{"line":197,"column":0}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":198,"column":0},"end":{"line":199,"column":0}},"children":[{"type":"text","value":"Grids","key":"F2wEpYVczH"}],"identifier":"grids","label":"Grids","html_id":"grids","implicit":true,"key":"vnaHFFNkXr"}],"data":{"lines_to_next_cell":2},"key":"rzTd5qEbwd"},{"type":"block","position":{"start":{"line":200,"column":0},"end":{"line":201,"column":0}},"children":[{"type":"code","lang":"python","value":"def scatter_hist(x, y, color, ax, ax_histx, ax_histy):\n    # no labels\n    ax_histx.tick_params(axis=\"x\", labelbottom=False)\n    ax_histy.tick_params(axis=\"y\", labelleft=False)\n\n    # the scatter plot:\n    hist = ax.scatter(x, y, c=color, cmap=\"viridis\", alpha=0.6)\n\n    # now determine nice limits by hand:\n    binwidth = 1.5\n    xymax = max(np.max(x), np.max(y))\n    xymin = min(np.min(x), np.min(y))\n    top = (int(xymax / binwidth) + 1) * binwidth\n    bottom = (int(xymin / binwidth) + 1) * binwidth\n\n    bins = np.arange(bottom, top + binwidth, binwidth)\n    ax_histx.hist(x, bins=bins)\n    ax_histy.hist(y, bins=bins, orientation=\"horizontal\")\n\n    return hist","position":{"start":{"line":202,"column":0},"end":{"line":224,"column":0}},"key":"uC9nYzs2sG"}],"data":{"collapsed":false,"jupyter":{"outputs_hidden":false},"pycharm":{"name":"#%%\n"}},"key":"hFoz9NNUNX"},{"type":"block","position":{"start":{"line":225,"column":0},"end":{"line":226,"column":0}},"children":[{"type":"code","lang":"python","value":"# definitions for the axes\nleft, width = 0.1, 0.65\nbottom, height = 0.1, 0.65\nspacing = 0.005\n\nrect_scatter = [left, bottom, width, height]\nrect_histx = [left, bottom + height + spacing, width, 0.2]\nrect_histy = [left + width + spacing, bottom, 0.2, height]\n\n# start with a square Figure\nfig = plt.figure(figsize=(8, 8))\n\nax = fig.add_axes(rect_scatter)\nax_histx = fig.add_axes(rect_histx, sharex=ax)\nax_histy = fig.add_axes(rect_histy, sharey=ax)\n\nx = agent.solution[T].deposit_stage.gaussian_interp.grids[0]\ny = agent.solution[T].deposit_stage.gaussian_interp.grids[1]\ncolor = agent.solution[T].deposit_stage.gaussian_interp.values\n\nidx = np.logical_or(x < 0, y < 0)\n\nx = x[~idx]\ny = y[~idx]\ncolor = color[~idx]\n\n# use the previously defined function\nhist = scatter_hist(x, y, color, ax, ax_histx, ax_histy)\ncbar = fig.colorbar(hist)\ncbar.ax.set_ylabel(\"Pension Deposits $d$\")\n\nfig.suptitle(\"Pension Deposit on Endogenous Grid\", fontsize=16)\nax.set_xlabel(\"Market Resources $m$\")\nax.set_ylabel(\"Retirement Savings $n$\")\nplt.show()\nfig.savefig(figures_path + \"EndogenousGrid.pdf\")","position":{"start":{"line":227,"column":0},"end":{"line":265,"column":0}},"key":"XT0JnUXkGC"},{"type":"output","id":"Jx_PXk77ZiMlpGbEahKiq","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"410cb4a1fe4670c07fe8d81c4f8d0c7f","path":"/_static/410cb4a1fe4670c07fe8d81c4f8d0c7f.png"},"text/plain":{"content":"<Figure size 800x800 with 4 Axes>","content_type":"text/plain"}}}],"key":"UpKG0gwLz7"}],"data":{"collapsed":false,"jupyter":{"outputs_hidden":false},"pycharm":{"name":"#%%\n"}},"key":"B6ty8NBhCz"},{"type":"block","position":{"start":{"line":270,"column":0},"end":{"line":271,"column":0}},"children":[{"type":"code","lang":"python","value":"grids = agent.solution[T].consumption_stage.grids_before_cleanup","position":{"start":{"line":272,"column":0},"end":{"line":275,"column":0}},"key":"Xi9IOJ7zF4"}],"data":{"lines_to_next_cell":2},"key":"sMY3HBvsHI"},{"type":"block","position":{"start":{"line":276,"column":0},"end":{"line":277,"column":0}},"children":[{"type":"code","lang":"python","value":"fig, ax = plt.subplots()\nplot = ax.scatter(\n    grids[\"mMat\"],\n    grids[\"nMat\"],\n    c=grids[\"dMat\"],\n    cmap=\"viridis\",\n    vmin=-1,\n    vmax=5,\n    plotnonfinite=True,\n    alpha=0.6,\n)\ncbar = fig.colorbar(plot)\ncbar.ax.set_ylabel(\"Pension Deposits $d$\")\n\n\nplt.xlim([-1, 10])\nplt.ylim([-1, 10])","position":{"start":{"line":278,"column":0},"end":{"line":297,"column":0}},"key":"UgS3Bgf6u7"},{"type":"output","id":"vMQdGv4ZLhx5ResPmCHyV","data":[{"output_type":"execute_result","execution_count":21,"metadata":{},"data":{"text/plain":{"content":"(-1.0, 10.0)","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"73a65b5d08133c2a0a73d12d4483dc57","path":"/_static/73a65b5d08133c2a0a73d12d4483dc57.png"},"text/plain":{"content":"<Figure size 640x480 with 2 Axes>","content_type":"text/plain"}}}],"key":"OpgmrkMNFn"}],"data":{"lines_to_next_cell":2},"key":"ltYu8c1Io3"},{"type":"block","position":{"start":{"line":302,"column":0},"end":{"line":303,"column":0}},"children":[{"type":"code","lang":"python","value":"fig, ax = plt.subplots()\nscatter = ax.scatter(\n    grids[\"lMat\"],\n    grids[\"b2Mat\"],\n    c=np.maximum(grids[\"dMat\"], 0),\n    cmap=\"viridis\",\n    vmin=-2,\n    vmax=15,\n    plotnonfinite=True,\n    alpha=0.6,\n)\ncbar = fig.colorbar(scatter)\ncbar.ax.set_ylabel(\"Pension Deposits $d$\")\n\nplt.title(\"Pension Deposits on Exogenous Post-Decision Grid\")\nplt.xlabel(r\"Liquid Wealth $\\ell$\")\nplt.ylabel(\"Retirement Balance $b$\")\nfig.savefig(figures_path + \"ExogenousGrid.pdf\")","position":{"start":{"line":304,"column":0},"end":{"line":324,"column":0}},"key":"u3jTyXcK6e"},{"type":"output","id":"2KQLiLnAgxAIn7Gimj2kc","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"13e1f88727c2226f25d26db0fa08e666","path":"/_static/13e1f88727c2226f25d26db0fa08e666.png"},"text/plain":{"content":"<Figure size 640x480 with 2 Axes>","content_type":"text/plain"}}}],"key":"PbAAqkxpKt"}],"data":{"lines_to_next_cell":2},"key":"YtjFcH3TYU"},{"type":"block","position":{"start":{"line":329,"column":0},"end":{"line":330,"column":0}},"children":[{"type":"code","lang":"python","value":"grids = agent.solution[T].consumption_stage.grids_before_cleanup","position":{"start":{"line":331,"column":0},"end":{"line":334,"column":0}},"key":"mPlITw0eMh"}],"data":{},"key":"wfft9MljVm"},{"type":"block","position":{"start":{"line":335,"column":0},"end":{"line":336,"column":0}},"children":[{"type":"code","lang":"python","value":"from HARK.interpolation._sklearn import GeneralizedRegressionUnstructuredInterp","position":{"start":{"line":337,"column":0},"end":{"line":340,"column":0}},"key":"RBiP45QPC6"}],"data":{},"key":"EBOGa84oR4"},{"type":"block","position":{"start":{"line":341,"column":0},"end":{"line":342,"column":0}},"children":[{"type":"code","lang":"python","value":"gauss_interp = GeneralizedRegressionUnstructuredInterp(\n    grids[\"dMat\"],\n    [grids[\"mMat\"], grids[\"nMat\"]],\n    model=\"gaussian-process\",\n    std=True,\n    model_kwargs={\"normalize_y\": True},\n)","position":{"start":{"line":343,"column":0},"end":{"line":352,"column":0}},"key":"p8bJm6pg4A"}],"data":{"lines_to_next_cell":2},"key":"kPOnvjaC8Q"},{"type":"block","position":{"start":{"line":353,"column":0},"end":{"line":354,"column":0}},"children":[{"type":"code","lang":"python","value":"get_ipython().run_line_magic(\"matplotlib\", \"widget\")\nplot_3d_func(gauss_interp, 0, 5)","position":{"start":{"line":355,"column":0},"end":{"line":359,"column":0}},"key":"D7z3U8cYhQ"},{"type":"output","id":"vQj2l-kr1izRYkiY5Z8hw","data":[{"output_type":"display_data","metadata":{},"data":{"application/vnd.jupyter.widget-view+json":{"content":"{\"model_id\":\"1f7b4f1bc6694726b10b77eae5ec2a66\",\"version_major\":2,\"version_minor\":0}","content_type":"application/vnd.jupyter.widget-view+json"},"image/png":{"content_type":"image/png","hash":"0a339c4163b9c4138bc05a558c4ba171","path":"/_static/0a339c4163b9c4138bc05a558c4ba171.png"},"text/html":{"content_type":"text/html","hash":"2cb83c1ae5bbec203f027852024d60c7","path":"/_static/2cb83c1ae5bbec203f027852024d60c7.html"},"text/plain":{"content":"Canvas(toolbar=Toolbar(toolitems=[('Home', 'Reset original view', 'home', 'home'), ('Back', 'Back to previous â€¦","content_type":"text/plain"}}}],"key":"AwrlSysmN9"}],"data":{"lines_to_next_cell":2},"key":"gVBptnC6yO"}],"key":"ce0Sy6rplx"},"references":{"cite":{"order":[],"data":{}}}}
